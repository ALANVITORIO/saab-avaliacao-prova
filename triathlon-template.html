<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise e Estratégia - {{EVENT_NAME}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            line-height: 1.6;
            color: #333;
        }

        .scenario-selector-inline {
            text-align: center;
            margin: 30px 0;
        }

        .scenario-selector-inline h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #000000;
            font-weight: 700;
        }

        .scenario-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .scenario-btn {
            padding: 15px 35px;
            font-size: 1.1em;
            font-weight: 700;
            border: 3px solid #D0494E;
            background: white;
            color: #D0494E;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .scenario-btn:hover {
            background: #fef2f2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.3);
        }

        .scenario-btn.active {
            background: linear-gradient(135deg, #D0494E 0%, #400404 100%);
            color: white;
            border-color: #D0494E;
            box-shadow: 0 5px 20px rgba(156, 39, 176, 0.4);
        }

        .scenario-card {
            transition: all 0.3s ease;
        }

        .scenario-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1) !important;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
        }

        .main-header {
            background: linear-gradient(135deg, #D0494E 0%, #400404 50%, #400404 100%);
            color: white;
            padding: 60px;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: '70.3';
            position: absolute;
            right: -50px;
            top: -30px;
            font-size: 15em;
            font-weight: 900;
            opacity: 0.08;
            transform: rotate(-15deg);
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header-content h1 {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .header-content h2 {
            font-size: 1.8em;
            font-weight: 400;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .header-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
        }

        .detail-item {
            text-align: center;
        }

        .detail-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .detail-value {
            font-size: 1.5em;
            font-weight: 700;
        }

        .content {
            padding: 50px 60px;
        }

        .section {
            margin-bottom: 60px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 35px;
            padding-bottom: 20px;
            border-bottom: 4px solid #D0494E;
        }

        .section-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #D0494E 0%, #400404 100%);
            color: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: 700;
            flex-shrink: 0;
        }

        .section-title {
            color: #000000;
            font-size: 2.2em;
            font-weight: 700;
            flex-grow: 1;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }

        .overview-card {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 5px solid #D0494E;
            border-radius: 12px;
            padding: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .overview-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.2);
        }

        .overview-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #000000;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .overview-stat {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .overview-stat:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #666;
            font-size: 0.95em;
        }

        .stat-value {
            color: #400404;
            font-weight: 700;
            font-size: 1.1em;
        }

        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin: 30px 0;
        }

        .data-table thead {
            background: linear-gradient(135deg, #D0494E 0%, #D0494E 100%);
            color: white;
        }

        .data-table th {
            padding: 18px 15px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.85em;
        }

        .data-table tbody tr {
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: #f8f8f8;
        }

        .data-table td {
            padding: 15px;
            color: #333;
        }

        .data-table .highlight {
            background: linear-gradient(90deg, #fff5f8 0%, #ffe8f0 100%);
            font-weight: 600;
        }

        .discipline-card {
            background: white;
            border: 2px solid #f0f0f0;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .discipline-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #D0494E;
        }

        .discipline-badge {
            background: linear-gradient(135deg, #D0494E 0%, #D0494E 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1.2em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .discipline-title {
            flex-grow: 1;
        }

        .discipline-name {
            font-size: 2em;
            font-weight: 700;
            color: #000000;
            margin-bottom: 5px;
        }

        .discipline-distance {
            font-size: 1.3em;
            color: #D0494E;
            font-weight: 600;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 25px 0;
            padding: 25px;
            background: #f8f8f8;
            border-radius: 12px;
        }

        .metric-box {
            text-align: center;
        }

        .metric-label {
            font-size: 0.85em;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #400404;
        }

        .strategy-zones {
            margin-top: 30px;
        }

        .zone {
            background: linear-gradient(90deg, #fef2f2 0%, white 100%);
            border-left: 4px solid #D0494E;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .zone-header {
            font-size: 1.3em;
            font-weight: 700;
            color: #000000;
            margin-bottom: 15px;
        }

        .zone-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 25px;
        }

        .zone-metrics {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .zone-metric {
            background: white;
            padding: 12px 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .zone-metric-label {
            font-size: 0.9em;
            color: #666;
        }

        .zone-metric-value {
            font-size: 1.1em;
            font-weight: 700;
            color: #400404;
        }

        .zone-tips {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .zone-tips strong {
            display: block;
            color: #000000;
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        .zone-tips ul {
            list-style: none;
            padding: 0;
        }

        .zone-tips li {
            padding: 6px 0 6px 25px;
            position: relative;
            color: #555;
            font-size: 0.95em;
        }

        .zone-tips li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: #D0494E;
            font-weight: bold;
        }

        .timeline {
            background: linear-gradient(135deg, #D0494E 0%, #400404 50%, #400404 100%);
            color: white;
            border-radius: 15px;
            padding: 40px;
            margin: 40px 0;
        }

        .timeline-title {
            font-size: 2em;
            font-weight: 700;
            text-align: center;
            margin-bottom: 35px;
        }

        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }

        .timeline-item {
            text-align: center;
            padding: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .timeline-label {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .timeline-distance {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .timeline-time {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .tips-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 5px solid #D0494E;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
        }

        .tips-title {
            color: #000000;
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .tip-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
        }

        .tip-item strong {
            color: #400404;
            display: block;
            margin-bottom: 8px;
        }

        .footer {
            background: linear-gradient(135deg, #D0494E 0%, #400404 50%, #400404 100%);
            color: white;
            padding: 40px 60px;
            text-align: center;
        }

        .footer-title {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .footer-text {
            font-size: 1.1em;
            line-height: 1.8;
            opacity: 0.95;
        }

        .footer-motto {
            margin-top: 25px;
            font-size: 1.4em;
            font-weight: 700;
        }

        @media (max-width: 1024px) {
            .overview-grid,
            .metrics-grid,
            .tips-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .timeline-grid {
                grid-template-columns: 1fr;
            }

            .zone-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
            }

            .main-header {
                padding: 30px 20px;
            }

            .header-details {
                grid-template-columns: 1fr;
            }

            .overview-grid,
            .metrics-grid,
            .tips-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <!-- Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- NAVEGAÇÃO E DASHBOARD -->
        <div style="background: #fef2f2; padding: 20px 30px; border-bottom: 2px solid #E8E2DD; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100;">
            <div style="font-weight: 700; color: #D0494E; font-size: 1.1em;">{{EVENT_NAME}}</div>
            <button onclick="toggleDashboard()" id="dashboardToggle" style="display: inline-flex; align-items: center; gap: 8px; padding: 12px 25px; background: linear-gradient(135deg, #D0494E 0%, #400404 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(208, 73, 78, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 18px rgba(208, 73, 78, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(208, 73, 78, 0.3)'">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>
                </svg>
                <span id="dashboardBtnText">Visualizar Dashboard</span>
            </button>
        </div>

        <!-- CABEÇALHO -->
        <div class="main-header">
                            <div class="header-content">
                <h1>ANÁLISE E ESTRATÉGIA DE PROVA</h1>
                <h2>{{EVENT_NAME}} | Atleta: {{ATHLETE_NAME}}</h2>

                <div class="header-details">
                    <div class="detail-item">
                        <div class="detail-label">Data da Prova</div>
                        <div class="detail-value">{{EVENT_DATE}}</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Distância Total</div>
                        <div class="detail-value">112.9 km</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Local</div>
                        <div class="detail-value">{{EVENT_LOCATION}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- CARD DE MÉTRICAS PRINCIPAIS -->
            <div style="background: linear-gradient(135deg, #D0494E 0%, #400404 50%, #400404 100%); border-radius: 15px; padding: 40px; margin-bottom: 50px; color: white; box-shadow: 0 8px 30px rgba(0,0,0,0.15);">
                <h3 style="font-size: 2em; font-weight: 700; text-align: center; margin-bottom: 35px; text-transform: uppercase; letter-spacing: 2px;">Métricas Principais da Preparação</h3>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; max-width: 800px; margin: 0 auto;">
                    <div style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 12px; padding: 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 1em; opacity: 0.9; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">Período</div>
                        <div style="font-size: 2.2em; font-weight: 700;">{{TOTAL_WEEKS}} semanas</div>
                        <div style="font-size: 0.95em; opacity: 0.85; margin-top: 10px;">Período de Preparação</div>
                    </div>

                    <div style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: 12px; padding: 30px; text-align: center; border: 1px solid rgba(255,255,255,0.2);">
                        <div style="font-size: 1em; opacity: 0.9; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">Volume Total</div>
                        <div style="font-size: 2.2em; font-weight: 700;">{{TOTAL_HOURS}} h</div>
                        <div style="font-size: 0.95em; opacity: 0.85; margin-top: 10px;">{{TOTAL_WORKOUTS}} treinos realizados</div>
                    </div>
                </div>
                
                <div style="margin-top: 35px; padding-top: 35px; border-top: 1px solid rgba(255,255,255,0.2); text-align: center;">
                    <div style="font-size: 1.1em; opacity: 0.9; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">Classificação de Performance</div>
                    <div style="font-size: 2.8em; font-weight: 700; text-transform: uppercase; letter-spacing: 2px;">EXCELENTE</div>
                    <div style="font-size: 1.05em; opacity: 0.9; margin-top: 12px;">Preparação sólida com volumes adequados e evolução consistente</div>
                    <div style="font-size: 0.95em; opacity: 0.85; margin-top: 15px;">3 Cenários de Prova: Meta A - Agressivo (Recomendado 4:57-5:15) | Meta B - Realista (5:20-5:45) | Meta C - Conservador (5:50-6:20)</div>
                </div>
            </div>

            <!-- DASHBOARD VISUAL (Oculto por padrão) -->
            <div id="visualDashboard" style="display: none; margin-bottom: 50px; animation: fadeIn 0.5s ease-in;">
                <div style="background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); border-left: 5px solid #D0494E; border-radius: 15px; padding: 35px; margin-bottom: 30px;">
                    <h3 style="color: #400404; font-size: 2em; font-weight: 700; text-align: center; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 10px;">
                            <line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>
                        </svg>
                        Dashboard Visual de Treino
                    </h3>
                    <p style="text-align: center; color: #400404; font-size: 1.1em; opacity: 0.8;">Visualização interativa dos seus dados de preparação</p>
                </div>

                <!-- Grid de Gráficos -->
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-bottom: 30px;">
                    <!-- Gráfico 1: Distribuição por Disciplina -->
                    <div style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                        <h4 style="color: #400404; font-size: 1.3em; font-weight: 700; margin-bottom: 20px; text-align: center;">Distribuição de Volume</h4>
                        <canvas id="chartDisciplineVolume"></canvas>
                    </div>

                    <!-- Gráfico 2: Treinos por Disciplina -->
                    <div style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                        <h4 style="color: #400404; font-size: 1.3em; font-weight: 700; margin-bottom: 20px; text-align: center;">Quantidade de Treinos</h4>
                        <canvas id="chartWorkoutCount"></canvas>
                    </div>

                    <!-- Gráfico 3: Pace Médio Comparativo -->
                    <div style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                        <h4 style="color: #400404; font-size: 1.3em; font-weight: 700; margin-bottom: 20px; text-align: center;">Pace/Velocidade Média</h4>
                        <canvas id="chartAvgPace"></canvas>
                    </div>

                    <!-- Gráfico 4: Volume Total Horas -->
                    <div style="background: white; border-radius: 15px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                        <h4 style="color: #400404; font-size: 1.3em; font-weight: 700; margin-bottom: 20px; text-align: center;">Volume Total (horas)</h4>
                        <canvas id="chartTotalHours"></canvas>
                    </div>
                </div>

                <!-- Botão para Fechar Dashboard -->
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="toggleDashboard()" style="padding: 12px 30px; background: linear-gradient(135deg, #400404 0%, #D0494E 100%); color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 1em; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(64, 4, 4, 0.3);" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        Fechar Dashboard
                    </button>
                </div>
            </div>

            <!-- SEÇÃO 1: RESUMO -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">1</div>
                    <h2 class="section-title">Resumo da Preparação</h2>
                </div>

                <div class="overview-grid">
                    <div class="overview-card">
                        <div class="overview-title">NATAÇÃO</div>
                        <div class="overview-stat">
                            <span class="stat-label">Treinos Realizados</span>
                            <span class="stat-value">{{SWIM_WORKOUTS}}</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Volume Total</span>
                            <span class="stat-value">{{SWIM_TOTAL_KM}} km</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Pace Médio</span>
                            <span class="stat-value">{{SWIM_AVG_PACE}}</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Melhor Treino</span>
                            <span class="stat-value">{{SWIM_BEST_WORKOUT}}</span>
                        </div>
                    </div>

                    <div class="overview-card">
                        <div class="overview-title">CICLISMO</div>
                        <div class="overview-stat">
                            <span class="stat-label">Treinos Realizados</span>
                            <span class="stat-value">{{BIKE_WORKOUTS}}</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Volume Total</span>
                            <span class="stat-value">{{BIKE_TOTAL_KM}} km</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Velocidade Média</span>
                            <span class="stat-value">{{BIKE_AVG_SPEED}} km/h</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Melhor Treino</span>
                            <span class="stat-value">{{BIKE_BEST_WORKOUT}}</span>
                        </div>
                    </div>

                    <div class="overview-card">
                        <div class="overview-title">CORRIDA</div>
                        <div class="overview-stat">
                            <span class="stat-label">Treinos Realizados</span>
                            <span class="stat-value">{{RUN_WORKOUTS}}</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Volume Total</span>
                            <span class="stat-value">{{RUN_TOTAL_KM}} km</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Pace Médio</span>
                            <span class="stat-value">{{RUN_AVG_PACE}}</span>
                        </div>
                        <div class="overview-stat">
                            <span class="stat-label">Melhor Treino</span>
                            <span class="stat-value">{{RUN_BEST_WORKOUT}}</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEÇÃO 2: PRINCIPAIS TREINOS -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">2</div>
                    <h2 class="section-title">Principais Treinos Realizados</h2>
                </div>

                <h3 style="font-size: 1.5em; margin-bottom: 20px; color: #400404;">NATAÇÃO - Treinos Longos do Período (≥ 2.8km)</h3>
                {{SWIM_WORKOUTS_TABLE}}

                {{SWIM_ZONE_TEMPO_ANALYSIS}}
                <h3 style="font-size: 1.5em; margin: 40px 0 20px 0; color: #400404;">CICLISMO - Treinos Longos do Período (≥ 70km)</h3>
                {{BIKE_WORKOUTS_TABLE}}

                {{BIKE_ZONE_TEMPO_ANALYSIS}}
                <h3 style="font-size: 1.5em; margin: 40px 0 20px 0; color: #400404;">CORRIDA - Treinos Longos do Período (≥ 15km)</h3>
                {{RUN_WORKOUTS_TABLE}}

                {{RUN_RACE_PACE_ANALYSIS}}
            <div class="section">
                <div class="section-header">
                    <div class="section-number">3</div>
                    <h2 class="section-title">Cenários de Tempo - {{EVENT_NAME}}</h2>
                </div>

                <div style="margin-bottom: 40px;">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin-bottom: 40px;" id="scenarioCards">
                        <!-- CENÁRIO META A -->
                        <div class="scenario-card active" data-scenario="realista" style="background: white; border-radius: 15px; padding: 30px; border: 4px solid #D0494E; min-height: 600px; display: flex; flex-direction: column; position: relative; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(156, 39, 176, 0.2);">
                            <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: #D0494E; color: white; padding: 8px 24px; border-radius: 20px; font-weight: 700; font-size: 0.85em; letter-spacing: 1px;">RECOMENDADA</div>
                            <div style="text-align: center; margin-bottom: 25px; margin-top: 10px;">
                                <div style="font-size: 1.1em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; color: #D0494E; font-weight: 700;">META A</div>
                                <div style="font-size: 2.5em; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; color: #400404;">AGRESSIVO</div>
                                <div style="font-size: 0.95em; margin-top: 10px; color: #666;">Dia Perfeito</div>
                            </div>
                            
                            <div style="background: #f5f5f5; border-radius: 10px; padding: 20px; margin-bottom: 20px; flex-grow: 1;">
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Natação 1.9km</span>
                                    <strong>{{META_A_SWIM_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: {{META_A_SWIM_PACE}}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T1</span>
                                    <strong>4 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Bike 90km</span>
                                    <strong>{{META_A_BIKE_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Vel: {{META_A_BIKE_SPEED}} km/h</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T2</span>
                                    <strong>2 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Run 21.1km</span>
                                    <strong>{{META_A_RUN_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: {{META_A_RUN_PACE}}</span>
                                </div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f5f5f5; border-radius: 10px;">
                                <div style="font-size: 0.95em; margin-bottom: 8px; color: #666;">TEMPO TOTAL</div>
                                <div style="font-size: 3em; font-weight: 700; letter-spacing: 2px; color: #400404;">{{META_A_TOTAL_TIME}}</div>
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; line-height: 1.6; color: #333;">
                                <strong style="display: block; margin-bottom: 8px;">Requer:</strong>
                                Dia perfeito + pico de forma + condições ideais
                            </div>
                        </div>

                        <!-- CENÁRIO META B -->
                        <div class="scenario-card" data-scenario="conservador" style="background: white; border-radius: 15px; padding: 30px; border: 2px solid #e0e0e0; min-height: 600px; display: flex; flex-direction: column; position: relative; cursor: pointer; transition: all 0.3s ease;">
                            <div style="text-align: center; margin-bottom: 25px;">
                                <div style="font-size: 1.1em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; color: #666; font-weight: 600;">META B</div>
                                <div style="font-size: 2.5em; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; color: #400404;">REALISTA</div>
                                <div style="font-size: 0.95em; margin-top: 10px; color: #666;">Dia Bom</div>
                            </div>
                            
                            <div style="background: #f5f5f5; border-radius: 10px; padding: 20px; margin-bottom: 20px; flex-grow: 1;">
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Natação 1.9km</span>
                                    <strong>{{META_B_SWIM_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: {{META_B_SWIM_PACE}}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T1</span>
                                    <strong>4 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Bike 90km</span>
                                    <strong>{{META_B_BIKE_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Vel: {{META_B_BIKE_SPEED}} km/h</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T2</span>
                                    <strong>3 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Run 21.1km</span>
                                    <strong>{{META_B_RUN_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: {{META_B_RUN_PACE}}</span>
                                </div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f5f5f5; border-radius: 10px;">
                                <div style="font-size: 0.95em; margin-bottom: 8px; color: #666;">TEMPO TOTAL</div>
                                <div style="font-size: 3em; font-weight: 700; letter-spacing: 2px; color: #400404;">{{META_B_TOTAL_TIME}}</div>
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; line-height: 1.6; color: #333;">
                                <strong style="display: block; margin-bottom: 8px;">Requer:</strong>
                                Execução consistente + ritmo sustentável + foco mental
                            </div>
                        </div>

                        <!-- CENÁRIO META C -->
                        <div class="scenario-card" data-scenario="desafiador" style="background: white; border-radius: 15px; padding: 30px; border: 2px solid #e0e0e0; min-height: 600px; display: flex; flex-direction: column; position: relative; cursor: pointer; transition: all 0.3s ease;">
                            <div style="text-align: center; margin-bottom: 25px;">
                                <div style="font-size: 1.1em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1.5px; color: #666; font-weight: 600;">META C</div>
                                <div style="font-size: 2.5em; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; color: #400404;">CONSERVADOR</div>
                                <div style="font-size: 0.95em; margin-top: 10px; color: #666;">Dia Difícil</div>
                            </div>
                            
                            <div style="background: #f5f5f5; border-radius: 10px; padding: 20px; margin-bottom: 20px; flex-grow: 1;">
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Natação 1.9km</span>
                                    <strong>{{META_C_SWIM_TIME}}</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: {{META_C_SWIM_PACE}}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T1</span>
                                    <strong>4 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Bike 90km</span>
                                    <strong>3h05-3h20 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Vel: 27.0-29.3 km/h</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>T2</span>
                                    <strong>4 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e0e0e0; color: #333;">
                                    <span>Run 21.1km</span>
                                    <strong>2h00-2h07 min</strong>
                                </div>
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; color: #666;">
                                    <span style="font-size: 0.85em; padding-left: 10px;">Pace: 5:41-6:01/km</span>
                                </div>
                            </div>
                            
                            <div style="text-align: center; padding: 20px; background: #f5f5f5; border-radius: 10px;">
                                <div style="font-size: 0.95em; margin-bottom: 8px; color: #666;">TEMPO TOTAL</div>
                                <div style="font-size: 3em; font-weight: 700; letter-spacing: 2px; color: #400404;">{{META_C_TOTAL_TIME}}</div>
                            </div>
                            
                            <div style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px; font-size: 0.9em; line-height: 1.6; color: #333;">
                                <strong style="display: block; margin-bottom: 8px;">Requer:</strong>
                                Ritmo controlado + gestão de energia + finalizar forte
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ESTRATÉGIAS POR MODALIDADE -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">4</div>
                    <h2 class="section-title">Estratégia por Modalidade</h2>
                </div>

                <div class="scenario-selector-inline">
                    <h3>Selecione seu Cenário de Prova</h3>
                    <div class="scenario-buttons">
                        <button class="scenario-btn active" onclick="selectScenario('realista')">META A - AGRESSIVO</button>
                        <button class="scenario-btn" onclick="selectScenario('conservador')">META B - REALISTA</button>
                        <button class="scenario-btn" onclick="selectScenario('desafiador')">META C - CONSERVADOR</button>
                    </div>
                </div>

                <div style="background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); border-left: 5px solid #D0494E; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <p style="font-size: 1.1em; line-height: 1.8; color: #000000; margin: 0;">
                        <strong style="color: #400404;">A estratégia abaixo se ajusta automaticamente ao cenário selecionado!</strong><br>
                        Todos os ritmos, velocidades, frequências cardíacas e zonas de esforço refletem o cenário escolhido acima.
                    </p>
                </div>
            </div>

            <!-- NATAÇÃO -->
            <div class="section">
                <div class="discipline-card">
                    <div class="discipline-header">
                        <div class="discipline-badge">SWIM</div>
                        <div class="discipline-title">
                            <div class="discipline-name">Natação em Mar Aberto</div>
                            <div class="discipline-distance">1.900 metros</div>
                        </div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Pace Alvo</div>
                            <div class="metric-value" data-swim-pace>1:44-1:50</div>
                            <div class="metric-label">/100m</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Tempo Estimado</div>
                            <div class="metric-value" data-swim-time>33-35</div>
                            <div class="metric-label">minutos</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">FC Média</div>
                            <div class="metric-value" data-swim-hr>132-142</div>
                            <div class="metric-label">bpm</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Esforço</div>
                            <div class="metric-value">75-80%</div>
                            <div class="metric-label">constante</div>
                        </div>
                    </div>

                    <div class="strategy-zones">
                        <div class="zone">
                            <div class="zone-header">0-400m: Largada Controlada</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-swim-zone1-pace>1:52-2:02/100m</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Esforço</span>
                                        <span class="zone-metric-value">70-75%</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Posicione-se estrategicamente evitando o centro - procure espaço nas laterais</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">400-1500m: Ritmo de Cruzeiro</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-swim-zone2-pace>1:44-1:52/100m</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Esforço</span>
                                        <span class="zone-metric-value">75-80%</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Mantenha braçada longa e eficiente - respire bilateralmente para melhor orientação</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">1500-1900m: Finalização Forte</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-swim-zone3-pace>1:40-1:48/100m</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Esforço</span>
                                        <span class="zone-metric-value">80-85%</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Últimos 300m: acelere progressivamente preparando as pernas para a bike</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CICLISMO -->
            <div class="section">
                <div class="discipline-card">
                    <div class="discipline-header">
                        <div class="discipline-badge">BIKE</div>
                        <div class="discipline-title">
                            <div class="discipline-name">Percurso de Ciclismo</div>
                            <div class="discipline-distance">90 quilômetros</div>
                        </div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Vel. Média</div>
                            <div class="metric-value" data-bike-speed>31.8-33.8</div>
                            <div class="metric-label">km/h</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Tempo Estimado</div>
                            <div class="metric-value" data-bike-time>2h40-2h50</div>
                            <div class="metric-label">horas</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">FC Média</div>
                            <div class="metric-value" data-bike-hr>138-148</div>
                            <div class="metric-label">bpm</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Cadência</div>
                            <div class="metric-value">85-95</div>
                            <div class="metric-label">rpm</div>
                        </div>
                    </div>

                    <div class="strategy-zones">
                        <div class="zone">
                            <div class="zone-header">0-20km: Adaptação Pós-Natação</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Velocidade</span>
                                        <span class="zone-metric-value" data-bike-zone1-speed>29-32 km/h</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-bike-zone1-hr>133-143 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Cadência</span>
                                        <span class="zone-metric-value">85-95 rpm</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Primeiros 10km MUITO controlados com cadência alta (85-95 rpm) para ativar as pernas</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">20-65km: Ritmo de Prova</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Velocidade</span>
                                        <span class="zone-metric-value" data-bike-zone2-speed>33-36 km/h</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-bike-zone2-hr>138-148 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Cadência</span>
                                        <span class="zone-metric-value">85-95 rpm</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Mantenha ritmo consistente - não ataque subidas, suba no ritmo</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">65-90km: Preparação para Corrida</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Velocidade</span>
                                        <span class="zone-metric-value" data-bike-zone3-speed>31-34 km/h</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-bike-zone3-hr>133-143 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Cadência</span>
                                        <span class="zone-metric-value">85-95 rpm</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Últimos 5km: fique em pé periodicamente para ativar músculos da corrida</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CORRIDA -->
            <div class="section">
                <div class="discipline-card">
                    <div class="discipline-header">
                        <div class="discipline-badge">RUN</div>
                        <div class="discipline-title">
                            <div class="discipline-name">Meia Maratona</div>
                            <div class="discipline-distance">21.1 quilômetros</div>
                        </div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Pace Alvo</div>
                            <div class="metric-value" data-run-pace>4:39-4:56</div>
                            <div class="metric-label">/km</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Tempo Estimado</div>
                            <div class="metric-value" data-run-time>1h38-1h44</div>
                            <div class="metric-label">horas</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">FC Média</div>
                            <div class="metric-value" data-run-hr>170-177</div>
                            <div class="metric-label">bpm</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Esforço</div>
                            <div class="metric-value">80-85%</div>
                            <div class="metric-label">controlado</div>
                        </div>
                    </div>

                    <div class="strategy-zones">
                        <div class="zone">
                            <div class="zone-header">0-5km: Encontrar as Pernas</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-run-zone1-pace>5:10-5:25/km</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-run-zone1-hr>165-172 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Tempo</span>
                                        <span class="zone-metric-value" data-run-zone1-time>26-27 min</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Primeiros 3km DEVAGAR - respeite a adaptação pós-bike, PACIÊNCIA aqui vale ouro!</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">5-16km: Ritmo de Prova</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-run-zone2-pace>4:40-4:55/km</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-run-zone2-hr>170-177 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Tempo</span>
                                        <span class="zone-metric-value" data-run-zone2-time>51-54 min</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Acelere GRADUALMENTE - encontre seu ritmo entre km 7-10</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="zone">
                            <div class="zone-header">16-21.1km: Finalização Forte</div>
                            <div class="zone-content">
                                <div class="zone-metrics">
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Pace</span>
                                        <span class="zone-metric-value" data-run-zone3-pace>4:30-4:50/km</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">FC</span>
                                        <span class="zone-metric-value" data-run-zone3-hr>174-180 bpm</span>
                                    </div>
                                    <div class="zone-metric">
                                        <span class="zone-metric-label">Tempo</span>
                                        <span class="zone-metric-value" data-run-zone3-time>23-25 min</span>
                                    </div>
                                </div>
                                <div class="zone-tips">
                                    <strong>Dica de Ouro:</strong>
                                    <ul>
                                        <li>Últimos 3km - DÊ TUDO que você guardou! Visualize a linha de chegada!</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DICAS FINAIS -->
            <div class="section">
                <div class="section-header">
                    <div class="section-number">5</div>
                    <h2 class="section-title">Pontos Críticos para o Dia da Prova</h2>
                </div>

                <div class="tips-box">
                    <div class="tips-title">RECOMENDAÇÕES ESSENCIAIS</div>
                    <div class="tips-grid">
                        <div class="tip-item">
                            <strong>Transições</strong>
                            Treine T1 e T2. Tenha tudo organizado - roupa, óculos, capacete no lugar certo.
                        </div>
                        <div class="tip-item">
                            <strong>Gestão de Esforço</strong>
                            A bike é para ECONOMIZAR energia para a corrida. Controle total aqui!
                        </div>
                        <div class="tip-item">
                            <strong>Primeiros 5km Run</strong>
                            DEVAGAR é rápido. Suas pernas vêm de 90km. Paciência = resultado!
                        </div>
                        <div class="tip-item">
                            <strong>Frequência Cardíaca</strong>
                            Na bike: max 135 bpm. Na corrida inicial: max 162 bpm. RESPEITE!
                        </div>
                        <div class="tip-item">
                            <strong>Mental</strong>
                            A prova tem altos e baixos. Momentos ruins PASSAM. Continue em frente!
                        </div>
                        <div class="tip-item">
                            <strong>Estratégia Geral</strong>
                            Nade confortável, pedale inteligente, corra corajoso. Nessa ordem!
                        </div>
                    </div>
                </div>

                <div class="tips-box" style="background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%); border-left-color: #D0494E;">
                    <div class="tips-title" style="color: #400404;">VOCÊ ESTÁ PREPARADA</div>
                    <div style="font-size: 1.1em; line-height: 1.8; color: #000000;">
                        <p style="margin-bottom: 15px;">
                            <strong>Você treinou {{TOTAL_WORKOUTS}} sessões para este momento</strong>
                        </p>
                        <p style="margin-bottom: 15px;">
                            {{SWIM_TOTAL_KM}}km nadados | {{BIKE_TOTAL_KM}}km pedalados | {{RUN_TOTAL_KM}}km corridos
                        </p>
                        <p style="margin-bottom: 15px;">
                            A preparação foi sólida e consistente com volumes adequados para o objetivo proposto.
                        </p>
                        <p style="margin-bottom: 15px;">
                            <strong style="color: #400404;">3 CENÁRIOS CALCULADOS:</strong><br>
                            Meta A - Agressivo ({{META_A_TOTAL_TIME}}) - Dia Perfeito<br>
                            Meta B - Realista ({{META_B_TOTAL_TIME}}) - Dia Bom<br>
                            Meta C - Conservador ({{META_C_TOTAL_TIME}}) - Dia Difícil
                        </p>
                        <p style="font-size: 1.2em; font-weight: 700; color: #400404; text-align: center; margin-top: 20px;">
                            SEU CORPO SABE O QUE FAZER - CONFIE NELE!
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-title">IRONMAN 70.3 FLORIANÓPOLIS 2025</div>
            <div class="footer-text">
                Este plano estratégico foi desenvolvido com base nos dados de treino de {{ATHLETE_NAME}}<br>
                entre agosto e outubro de 2025, incluindo análise de provas anteriores.<br>
                <strong>Meta: 3 Cenários | Meta A - Agressivo (Recomendado): 4:57-5:15 | Meta B - Realista: 5:20-5:45 | Meta C - Conservador: 5:50-6:20</strong><br>
                1.9km Natação + 90km Bike + 21.1km Run = 112.9km Total
            </div>
            <div class="footer-motto">
                VOCÊ É MAIS FORTE DO QUE IMAGINA
            </div>
        </div>
    </div>

    <script>
        const scenarios = {
            realista: {
                swim: {
                    pace: '1:44-1:50',
                    time: '33-35',
                    hr: '132-142',
                    zone1Pace: '1:52-2:02/100m',
                    zone2Pace: '1:44-1:52/100m',
                    zone3Pace: '1:40-1:48/100m'
                },
                bike: {
                    speed: '31.8-33.8',
                    time: '2h40-2h50',
                    hr: '138-148',
                    np: '128-138',
                    zone1Speed: '29-32 km/h',
                    zone1Np: '122-132W',
                    zone1Hr: '133-143 bpm',
                    zone2Speed: '33-36 km/h',
                    zone2Np: '130-140W',
                    zone2Hr: '138-148 bpm',
                    zone3Speed: '31-34 km/h',
                    zone3Np: '124-134W',
                    zone3Hr: '133-143 bpm'
                },
                run: {
                    pace: '4:39-4:56',
                    time: '1h38-1h44',
                    hr: '170-177',
                    zone1Pace: '5:10-5:25/km',
                    zone1Hr: '165-172 bpm',
                    zone1Time: '26-27 min',
                    zone2Pace: '4:40-4:55/km',
                    zone2Hr: '170-177 bpm',
                    zone2Time: '51-54 min',
                    zone3Pace: '4:30-4:50/km',
                    zone3Hr: '174-180 bpm',
                    zone3Time: '23-25 min'
                }
            },
            conservador: {
                swim: {
                    pace: '1:53-2:06',
                    time: '36-40',
                    hr: '127-137',
                    zone1Pace: '2:03-2:16/100m',
                    zone2Pace: '1:53-2:06/100m',
                    zone3Pace: '1:48-2:01/100m'
                },
                bike: {
                    speed: '30.0-31.8',
                    time: '2h50-3h00',
                    hr: '128-138',
                    zone1Speed: '27-30 km/h',
                    zone1Hr: '123-133 bpm',
                    zone2Speed: '31-33 km/h',
                    zone2Hr: '128-138 bpm',
                    zone3Speed: '29-32 km/h',
                    zone3Hr: '123-133 bpm'
                },
                run: {
                    pace: '5:05-5:27',
                    time: '1h47-1h55',
                    hr: '162-169',
                    zone1Pace: '5:40-6:00/km',
                    zone1Hr: '157-164 bpm',
                    zone1Time: '28-30 min',
                    zone2Pace: '5:05-5:25/km',
                    zone2Hr: '162-169 bpm',
                    zone2Time: '56-60 min',
                    zone3Pace: '4:55-5:15/km',
                    zone3Hr: '167-174 bpm',
                    zone3Time: '25-27 min'
                }
            },
            desafiador: {
                swim: {
                    pace: '2:09-2:22',
                    time: '41-45',
                    hr: '122-132',
                    zone1Pace: '2:20-2:35/100m',
                    zone2Pace: '2:12-2:26/100m',
                    zone3Pace: '2:05-2:19/100m'
                },
                bike: {
                    speed: '27.0-29.3',
                    time: '3h05-3h20',
                    hr: '120-130',
                    zone1Speed: '24-27 km/h',
                    zone1Hr: '115-125 bpm',
                    zone2Speed: '28-30 km/h',
                    zone2Hr: '120-130 bpm',
                    zone3Speed: '26-29 km/h',
                    zone3Hr: '115-125 bpm'
                },
                run: {
                    pace: '5:41-6:01',
                    time: '2h00-2h07',
                    hr: '157-164',
                    zone1Pace: '6:10-6:30/km',
                    zone1Hr: '152-159 bpm',
                    zone1Time: '31-33 min',
                    zone2Pace: '5:40-6:00/km',
                    zone2Hr: '157-164 bpm',
                    zone2Time: '62-66 min',
                    zone3Pace: '5:30-5:50/km',
                    zone3Hr: '162-169 bpm',
                    zone3Time: '28-30 min'
                }
            }
        };

        let currentScenario = 'realista';

        function selectScenario(scenario) {
            currentScenario = scenario;
            
            // Update button states
            document.querySelectorAll('.scenario-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update card states
            document.querySelectorAll('.scenario-card').forEach(card => {
                const cardScenario = card.getAttribute('data-scenario');
                if (cardScenario === scenario) {
                    card.style.border = '4px solid #D0494E';
                    card.style.boxShadow = '0 4px 20px rgba(156, 39, 176, 0.2)';
                    card.classList.add('active');
                } else {
                    card.style.border = '2px solid #e0e0e0';
                    card.style.boxShadow = 'none';
                    card.classList.remove('active');
                }
            });
            
            // Update all values
            const data = scenarios[scenario];
            
            // Update swim values
            document.querySelector('[data-swim-pace]').textContent = data.swim.pace;
            document.querySelector('[data-swim-time]').textContent = data.swim.time;
            document.querySelector('[data-swim-hr]').textContent = data.swim.hr;
            document.querySelector('[data-swim-zone1-pace]').textContent = data.swim.zone1Pace;
            document.querySelector('[data-swim-zone2-pace]').textContent = data.swim.zone2Pace;
            document.querySelector('[data-swim-zone3-pace]').textContent = data.swim.zone3Pace;
            
            // Update bike values
            document.querySelector('[data-bike-speed]').textContent = data.bike.speed;
            document.querySelector('[data-bike-time]').textContent = data.bike.time;
            document.querySelector('[data-bike-hr]').textContent = data.bike.hr;
            document.querySelector('[data-bike-zone1-speed]').textContent = data.bike.zone1Speed;
            document.querySelector('[data-bike-zone1-hr]').textContent = data.bike.zone1Hr;
            document.querySelector('[data-bike-zone2-speed]').textContent = data.bike.zone2Speed;
            document.querySelector('[data-bike-zone2-hr]').textContent = data.bike.zone2Hr;
            document.querySelector('[data-bike-zone3-speed]').textContent = data.bike.zone3Speed;
            document.querySelector('[data-bike-zone3-hr]').textContent = data.bike.zone3Hr;
            
            // Update run values
            document.querySelector('[data-run-pace]').textContent = data.run.pace;
            document.querySelector('[data-run-time]').textContent = data.run.time;
            document.querySelector('[data-run-hr]').textContent = data.run.hr;
            document.querySelector('[data-run-zone1-pace]').textContent = data.run.zone1Pace;
            document.querySelector('[data-run-zone1-hr]').textContent = data.run.zone1Hr;
            document.querySelector('[data-run-zone1-time]').textContent = data.run.zone1Time;
            document.querySelector('[data-run-zone2-pace]').textContent = data.run.zone2Pace;
            document.querySelector('[data-run-zone2-hr]').textContent = data.run.zone2Hr;
            document.querySelector('[data-run-zone2-time]').textContent = data.run.zone2Time;
            document.querySelector('[data-run-zone3-pace]').textContent = data.run.zone3Pace;
            document.querySelector('[data-run-zone3-hr]').textContent = data.run.zone3Hr;
            document.querySelector('[data-run-zone3-time]').textContent = data.run.zone3Time;
            
            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Add click listeners to scenario cards
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.addEventListener('click', function() {
                    const scenario = this.getAttribute('data-scenario');
                    
                    // Update card states
                    document.querySelectorAll('.scenario-card').forEach(c => {
                        if (c === this) {
                            c.style.border = '4px solid #D0494E';
                            c.style.boxShadow = '0 4px 20px rgba(156, 39, 176, 0.2)';
                            c.classList.add('active');
                        } else {
                            c.style.border = '2px solid #e0e0e0';
                            c.style.boxShadow = 'none';
                            c.classList.remove('active');
                        }
                    });
                    
                    // Update button states
                    document.querySelectorAll('.scenario-btn').forEach(btn => {
                        btn.classList.remove('active');
                        if ((scenario === 'realista' && btn.textContent.includes('META A')) ||
                            (scenario === 'conservador' && btn.textContent.includes('META B')) ||
                            (scenario === 'desafiador' && btn.textContent.includes('META C'))) {
                            btn.classList.add('active');
                        }
                    });
                    
                    // Update all values
                    currentScenario = scenario;
                    const data = scenarios[scenario];
                    
                    // Update swim values
                    document.querySelector('[data-swim-pace]').textContent = data.swim.pace;
                    document.querySelector('[data-swim-time]').textContent = data.swim.time;
                    document.querySelector('[data-swim-hr]').textContent = data.swim.hr;
                    document.querySelector('[data-swim-zone1-pace]').textContent = data.swim.zone1Pace;
                    document.querySelector('[data-swim-zone2-pace]').textContent = data.swim.zone2Pace;
                    document.querySelector('[data-swim-zone3-pace]').textContent = data.swim.zone3Pace;
                    
                    // Update bike values
                    document.querySelector('[data-bike-speed]').textContent = data.bike.speed;
                    document.querySelector('[data-bike-time]').textContent = data.bike.time;
                    document.querySelector('[data-bike-hr]').textContent = data.bike.hr;
                    document.querySelector('[data-bike-zone1-speed]').textContent = data.bike.zone1Speed;
                    document.querySelector('[data-bike-zone1-hr]').textContent = data.bike.zone1Hr;
                    document.querySelector('[data-bike-zone2-speed]').textContent = data.bike.zone2Speed;
                    document.querySelector('[data-bike-zone2-hr]').textContent = data.bike.zone2Hr;
                    document.querySelector('[data-bike-zone3-speed]').textContent = data.bike.zone3Speed;
                    document.querySelector('[data-bike-zone3-hr]').textContent = data.bike.zone3Hr;
                    
                    // Update run values
                    document.querySelector('[data-run-pace]').textContent = data.run.pace;
                    document.querySelector('[data-run-time]').textContent = data.run.time;
                    document.querySelector('[data-run-hr]').textContent = data.run.hr;
                    document.querySelector('[data-run-zone1-pace]').textContent = data.run.zone1Pace;
                    document.querySelector('[data-run-zone1-hr]').textContent = data.run.zone1Hr;
                    document.querySelector('[data-run-zone1-time]').textContent = data.run.zone1Time;
                    document.querySelector('[data-run-zone2-pace]').textContent = data.run.zone2Pace;
                    document.querySelector('[data-run-zone2-hr]').textContent = data.run.zone2Hr;
                    document.querySelector('[data-run-zone2-time]').textContent = data.run.zone2Time;
                    document.querySelector('[data-run-zone3-pace]').textContent = data.run.zone3Pace;
                    document.querySelector('[data-run-zone3-hr]').textContent = data.run.zone3Hr;
                    document.querySelector('[data-run-zone3-time]').textContent = data.run.zone3Time;
                    
                    // Smooth scroll to strategy section
                    document.querySelector('.scenario-selector-inline').scrollIntoView({ behavior: 'smooth', block: 'center' });
                });
            });
        });
    </script>

    <!-- DASHBOARD VISUAL - JavaScript -->
    <script>
        let chartsInitialized = false;
        let dashboardCharts = [];

        function toggleDashboard() {
            const dashboard = document.getElementById('visualDashboard');
            const btnText = document.getElementById('dashboardBtnText');

            if (dashboard.style.display === 'none') {
                dashboard.style.display = 'block';
                btnText.textContent = 'Ocultar Dashboard';
                dashboard.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // Inicializar gráficos apenas na primeira vez
                if (!chartsInitialized) {
                    setTimeout(initializeDashboardCharts, 300);
                    chartsInitialized = true;
                }
            } else {
                dashboard.style.display = 'none';
                btnText.textContent = 'Visualizar Dashboard';
                document.getElementById('dashboardToggle').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function initializeDashboardCharts() {
            // Configuração de cores da marca
            const brandColors = {
                red: '#D0494E',
                dark: '#400404',
                cream: '#E8E2DD',
                gradients: {
                    swim: 'rgba(59, 130, 246, 0.8)',     // Azul para natação
                    bike: 'rgba(16, 185, 129, 0.8)',     // Verde para ciclismo
                    run: 'rgba(208, 73, 78, 0.8)'        // Vermelho para corrida
                }
            };

            // Usar dados reais do CSV se disponíveis, senão usa exemplo
            const trainingData = window.REAL_CHART_DATA || {
                swim: { workouts: 21, totalKm: 51.9, avgPaceValue: 1.97, totalHours: 21.5 },
                bike: { workouts: 35, totalKm: 1756, avgSpeed: 29.8, totalHours: 59.0 },
                run: { workouts: 32, totalKm: 227.8, avgPaceValue: 5.5, totalHours: 33.3 }
            };

            // Gráfico 1: Distribuição de Volume (Pizza)
            const ctx1 = document.getElementById('chartDisciplineVolume').getContext('2d');
            dashboardCharts.push(new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['Natação', 'Ciclismo', 'Corrida'],
                    datasets: [{
                        data: [trainingData.swim.totalKm, trainingData.bike.totalKm, trainingData.run.totalKm],
                        backgroundColor: [
                            brandColors.gradients.swim,
                            brandColors.gradients.bike,
                            brandColors.gradients.run
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { font: { size: 14, weight: 'bold' } }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.toFixed(1) + ' km';
                                }
                            }
                        }
                    }
                }
            }));

            // Gráfico 2: Quantidade de Treinos (Barras Horizontais)
            const ctx2 = document.getElementById('chartWorkoutCount').getContext('2d');
            dashboardCharts.push(new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Natação', 'Ciclismo', 'Corrida'],
                    datasets: [{
                        label: 'Treinos',
                        data: [trainingData.swim.workouts, trainingData.bike.workouts, trainingData.run.workouts],
                        backgroundColor: [
                            brandColors.gradients.swim,
                            brandColors.gradients.bike,
                            brandColors.gradients.run
                        ],
                        borderWidth: 2,
                        borderColor: brandColors.dark,
                        borderRadius: 8
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.parsed.x + ' treinos';
                                }
                            }
                        }
                    },
                    scales: {
                        x: { beginAtZero: true, ticks: { font: { weight: 'bold' } } },
                        y: { ticks: { font: { weight: 'bold', size: 13 } } }
                    }
                }
            }));

            // Gráfico 3: Pace/Velocidade Média (Barras)
            const ctx3 = document.getElementById('chartAvgPace').getContext('2d');
            dashboardCharts.push(new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: ['Natação\n(min/100m)', 'Ciclismo\n(km/h)', 'Corrida\n(min/km)'],
                    datasets: [{
                        label: 'Velocidade',
                        data: [
                            trainingData.swim.avgPaceValue || 1.97,
                            trainingData.bike.avgSpeed || 29.8,
                            trainingData.run.avgPaceValue || 5.5
                        ],
                        backgroundColor: [
                            brandColors.gradients.swim,
                            brandColors.gradients.bike,
                            brandColors.gradients.run
                        ],
                        borderWidth: 2,
                        borderColor: brandColors.dark,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.dataIndex === 0) {
                                        const pace = trainingData.swim.avgPaceValue || 1.97;
                                        const mins = Math.floor(pace);
                                        const secs = Math.round((pace - mins) * 60);
                                        return mins + ':' + String(secs).padStart(2, '0') + '/100m';
                                    } else if (context.dataIndex === 1) {
                                        return (trainingData.bike.avgSpeed || 29.8) + ' km/h';
                                    } else {
                                        const pace = trainingData.run.avgPaceValue || 5.5;
                                        const mins = Math.floor(pace);
                                        const secs = Math.round((pace - mins) * 60);
                                        return mins + ':' + String(secs).padStart(2, '0') + '/km';
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, ticks: { font: { weight: 'bold' } } },
                        x: { ticks: { font: { weight: 'bold', size: 11 } } }
                    }
                }
            }));

            // Gráfico 4: Volume Total Horas (Pizza)
            const ctx4 = document.getElementById('chartTotalHours').getContext('2d');
            dashboardCharts.push(new Chart(ctx4, {
                type: 'pie',
                data: {
                    labels: ['Natação', 'Ciclismo', 'Corrida'],
                    datasets: [{
                        data: [trainingData.swim.totalHours, trainingData.bike.totalHours, trainingData.run.totalHours],
                        backgroundColor: [
                            brandColors.gradients.swim,
                            brandColors.gradients.bike,
                            brandColors.gradients.run
                        ],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { font: { size: 14, weight: 'bold' } }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return context.label + ': ' + context.parsed.toFixed(1) + 'h (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            }));
        }

        // Adicionar animação CSS fadeIn
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(-20px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>